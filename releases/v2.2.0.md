# Release v2.2.0

Date: 2012-05-14

## Description

May 14, 2012

- Fixed bugs
- Release 2.2 version

May 13, 2012

- New feature: assign to design vars the result of a method! If the programmer implemented a class that inherits of div, then the designer can use the methods of this class.

Syntax for template:

```div
{= variable: ->methodName(params as JSON) =}
    
```

For example:

Page.php

```php
<?php
class Page extends div{

    public function getSum($params){
        return $params->x + $params->y;
    }

    public function getLetters(){
        return array("A","B","C");
    }

}
?>

```

Page.tpl

```div
{= sum: ->getSum(x: 20, y: 30) =}  <!--{ The value should begin with the operator "->" }--> 

{$sum}

{= lts: ->getLetters() =}

[$lts] {$value} [/$lts]

```

Output

```div
50 A B C

```

May 12, 2012

- Now the definition of data in templates is similar to set a global var in the programmer side and you can re-refine this data every time in the template and now the sequence of the operations is not ignored.  The variables have arrived!

For example:

-- TEMPALTE 

```html
<!--{ Using cycles to calculate the price of invoice }-->

{= products: [
    {price: 10, qty: 5},
    {price: 20, qty: 2}
] =}

{= invoice_price: 0 =}
{= tax: 20 =}

[$products]    {= invoice_price:  (# {$invoice_price} +{$qty} * {$price} #) =}    [/$products]

Invoice price: {#invoice_price:2.#}<br>

Tax: {#tax:2.#}<br>

<!--{ Sum the tax to invoice_price and change the value of invoice_price variable }-->

{= invoice_price: (# {$invoice_price} + {$tax} #) =}

Total price: {#invoice_price:2.#}

```

-- OUTPUT

```div

Invoice price: 90.00
Tax: 20.00
Total price: 110.00

```

- Fixed bugs

- Add new feature: capsules!, with the symbol of Div logo!.... of course!

Now you can create capsules inside the insole to reduce the code and to facilitate the work with objects and arrangements. A capsule consists on a block that fulfills the following syntax:

```div
[[variable

```

... In this section you can use the properties of variable if it is an object or their keys if it is an array ...

variable]]

For example:

index.php

```php
<?php
```

... echo new div("index.tpl", array( "product" => array( "name" => "Banana", "price" => 20.4

```div
    )
));
```

...

```div
?>

```

index.tpl

```html
[[product
    Name: {$name} <br>
    Price: {$price} <br>
```

product]]

Enjoy!

- Add a new iteration feature: now you can specify a STEP for iteration.

Syntax:

Variant 1:

```div
[:from,to,var,step:]
  
```

Variant 2:

```div
[:from,to,step:]

```

Example 1:

Template:

```div
[:1,10,2:] {$value} [/]

```

Output:

```div
1 3 5 7 9

Example 2:
```

```div
[:1,10,i,2:] {$i} [/]

```

Output:

```div
1 3 5 7 9

Example 3:
```

```div
[:10,1,i,2:] {$i} [/]

```

10 8 6 4 2

- Another way to define the iteration var with high priority. Now the follow templates are similars:

Template 1:

```div
[:1,10,x:] .... [/]

```

Template 2:

```div
[:1,10:] x => .... [/]

```

The follow example shows the priority of this new way:

Template:

```div
[:1,10,x:] y => {$y} {$x} [/]

```

Output:

```div
1 {$x} 2 {$x} 3 {$x} 4 {$x} 5 {$x} 6 {$x} 7 {$x} 8 {$x} 9 {$x} 10 {$x}
 

```

May 09, 2012

- Added aggregate functions for the lists: sum, avg, min, max, and the default count function

Now the designer can calculate another statistics from lists, for example:

index.php

```php
<?php

```

... echo new div("index.tpl", array( "products" => array( array("name" => "Banana", "price" => 20.5), .... ... ...

```div
    ),
    "values" => array(10,20,30,40,50,60)
));

```

...

```div
?>
```

index.tpl

Minimum price: {$min:products-price} Maximum price: {$max:products-price} Average of prices: {$avg:products-price} Sum of prices: {$sum:products-price} Count of products with price: {$count:products-price} or {$products-price}

```div
<!--{ If the list is a numeric list you can ... }-->

Minimum value: {$min:values}
Maximum value: {$max:values}
Average of values: {$avg:values}
Sum of values: {$sum:values}    
```

- Added a new constant constant DIV_CLASS_NAME for define the name of de superclass of div. Now the programmer can change the name of the div class to avoid possible collisions the class's names of his application.

- Added a new feature: default replacements by variable.

Now the programmer and the designer can define the default replacements for values by variable. For example:

Set the default replacement in PHP:

```php
<?php
```

... div::setDefaultByVar("kept", true, "YES"); div::setDefaultByVar("kept", false, "NO"); ...

echo new div("index.tpl", array("kept" => true));

```div
?>

```

Or set the default replacement in the template:

...

```div
{@["kept", true, "YES"]@}
{@["kept", false, "NO"]@}
```

...

## Commits

- No commits found.
