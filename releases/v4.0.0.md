# Release v4.0.0

Date: 2013-05-27

## Description

May 27, 2013

- Change to private some div's properties
- Release 4.0 version

May 25, 2013

- Improvement of the conditional parts detection

May 24, 2013

- Fixed some bugs in locations and conditional parts.
- Created a translator of dialects. Now div have 2 new public methods:

```div
$tpl = new div('templateWithDialectX.tpl', $data);

$dialectY = 'json code'; // or associative array

// Return the translated template
$new_code = $tpl->translateFrom($dialectY);

// Translate and change the original template
$tpl->translateAndChange($dialectY);

```

- New feature: template properties. Now you can specify some properties in the template's code, for example, the dialect of the current template:

Example:

index.tpl 

```div
@_DIALECT = smarty.dialect

{* this is a comment *}
Name: {$name}

{literal}
{$name}
{/literal} 

{% other %}

```

other.tpl 

```div
@_DIALECT = twig.dialect

{{ foo.bar }}

```

smarty.dialect 

```div
{
  'DIV_TAG_IGNORE_BEGIN': '{literal}',
  'DIV_TAG_IGNORE_END': '{/literal}',
```

'DIV_TAG_COMMENT_BEGIN': '{*', 'DIV_TAG_COMMENT_END': '*}'

```div
}

```

twig.dialect

```div
{
```

'DIV_TAG_REPLACEMENT_SUFFIX': ' }}', 'DIV_TAG_MODIFIER_SIMPLE': '{ '

```div
}

```

index.php

```php
<?php

include "div.php";
echo  new div("index.tpl", array(
'name' => 'Peter',
'foo' => array(
'bar' => 45
)
));

```

Output

```div
Name: Peter

{$name}

45
```

- New feature: predefined subparsers. Div provide pre-defined sub-parsers, for example,

```div
{parse}...{/parse}. This example of sub-parser make a pre-proccess of enclosed code.
```

This means that a new instance of div will be created, similar to the loops and the capsules. Other predefined subparsers will be developed in future releases.

- New feature: sub-parser's events. Now in the templates's code you can specify when a sub-parser will be executed: beforeParse, afterInclude or afterParse. Example:

index.tpl

```div
     {= name: "Peter" =}
{= products: [
    {
        name: "banana",
```

price: 40

```div
},
{
    name: "potato",
```

price: 25

```div
    }
] =}

[$products]
    {parse:beforeParse}
    Name: {$name}
    {/parse:beforeParse}
    
    Product name: {$name}
    
    {% other %}
[/$products]
 
```

other.tpl

```div
   {parse:beforeParse}
    Other name: {$name}
{/parse:beforeParse}

```

Output

```div
Name: Peter
```

Product name: banana Other name: banana Name: Peter Product name: potato Other name: potato

## Commits

- No commits found.
