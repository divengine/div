# 2.44 The __toString magic method

If an object implements `__toString`, Div can treat it as a string in three scopes: template scope, loop body scope, and capsule scope.

- Template scope: `$_to_string`
- Loop and capsule scopes: `$_to_string` and `$value`

## 6.44.1 Template scope example

Person.php

```php
class Person{
    public function __construct($first_name, $last_name){
        $this->first_name = $first_name;
        $this->last_name = $last_name;
    }

    public function __toString(){
        return $this->first_name . " " . $this->last_name;
    }
}
```

index.php

```php
include 'div.php';
include 'Person.php';

echo new div('index.tpl', new Person("Albert", "Einstein"));
```

index.tpl

```
{$_to_string}
```

Output

```
Albert Einstein
```

## 6.44.2 Loop body scope example

index.php

```php
<?php

include 'div.php';
include 'Person.php';

echo new div('index.tpl', [
    "persons" => [
        new Person("Albert", "Einstein"),
        new Person("John", "Nash")
    ]
]);
```

index.tpl

```
If Person does not have a $value property:

[$persons]
    {$value}
[/$persons]

You can always use $_to_string:

[$persons]
    {^^^_to_string}
[/$persons]
```

Output

```
If Person does not have a $value property:

    Albert Einstein
    John Nash

You can always use $_to_string:

    ALBERT EINSTEIN
    JOHN NASH
```

## 6.44.3 Capsule scope example

index.php

```php
<?php

include 'div.php';
include 'Person.php';

echo new div('index.tpl', [
    "person" => new Person("Albert", "Einstein")
]);
```

index.tpl

```
[[person
    {$_to_string}

    {^^^value}

person]]
```

Output

```
Albert Einstein

ALBERT EINSTEIN
```