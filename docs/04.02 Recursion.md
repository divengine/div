# 4.2 Recursion

Div repeatedly interprets a template until no more replacements are possible. This is a convergence process, not a recursive algorithm, and it does not use the call stack.

Example

index.php

```php
<?php

include 'div.php';

$product = new stdClass();
$product->name = 'Banana';
$product->price = 20.5;

echo new div('index.tpl', [
    'product' => $product,
    'object' => 'product'
]);
```

index.tpl (origin)

```
[${$object}]

{$_key} = {$value}

[/${$object}]
```

Step 1

```
[$product]

{$_key} = {$value}

[/$product]
```

Step 2

```
[$product]

name = {$value}

[/$product]
```

Step 3

```
[$product]

name = Banana
price = {$value}

[/$product]
```

Step 4

```
name = Banana
price = 20.5
```